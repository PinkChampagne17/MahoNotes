<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>真步笔记 - 一个简单的PCR公会战计轴器</title> 
    <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css"
        integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk"
        crossorigin="anonymous"
    >
    <style>
        .chara-icon {
            margin-right: 10px;
            margin-bottom: 10px;
            opacity: 0.6;
            width: 60px;
        }
        .selected-chara-icon {
            opacity: 1;
            border: 2px solid rgb(255, 165, 0);
            border-radius: 7px;
        }
        .input-number {
            width: 50px;
        }
        table {
            text-align: center;
        }
        body {
            padding: 5px;
        }
    </style>
</head>
<body>
    <div id="app" style="display: none;" v-show="true">
        
        <nav class="navbar navbar-dark bg-dark">
            <span class="navbar-brand mb-0 h1">选择角色</span>
        </nav>

        <div style="margin-top: 5px;">
            <template v-for="(chara, index) in charas">
                <img 
                    :key="index"
                    :src="chara.imgSrc"
                    :title="chara.name"
                    class="chara-icon"
                    :class="{ 'selected-chara-icon': selectedCharas.some(c => c.name == chara.name) }"
                    @click="selectChara(chara)"
                >
                <hr v-if="['静流', '依里'].some(c => c == chara.name)">
            </template>
        </div>

        <nav class="navbar navbar-dark bg-dark">
            <span class="navbar-brand mb-0 h1">已选角色</span>
        </nav>

        <div style="margin-top: 5px;">
            <img
                v-for="(chara, index) in selectedCharas"
                :key="index"
                :src="chara.imgSrc"
                :title="chara.name"
                @click="deselectChara(chara)"
                class="chara-icon"
                style="opacity: 1;"
            >
            <img
                v-for="n in (5 - selectedCharas.length)"
                :src="charaIconsUrlBase + '/unknown.jpg'"
                class="chara-icon"
            >
        </div>

        <div v-show="selectedCharas.length != 0">
            <nav class="navbar navbar-dark bg-dark">
                <span class="navbar-brand mb-0 h1">添加技能施放时间</span>
            </nav>
            <selected-chara-skills
                v-for="(chara, index) in selectedCharas"
                :chara="chara"
                :key="index"
            ></selected-chara-skills>
        </div>
            
        <br>

        <div v-show="timeline.length != 0">
            <b>已添加的技能施放时间：</b>
            <table border="1">
                <tr>
                    <th style="min-width: 95px;">角色名</th>
                    <th style="min-width: 170px;">技能名</th>
                    <th style="min-width: 95px;">时间</th>
                    <th style="min-width: 95px;"></th>
                </tr>
                <template v-for="(item, index) in timeline">
                    <tr :key="index">
                        <td>
                            <img
                                :src="item.chara.imgSrc"
                                width="30"
                                height="30"
                                :alt="item.chara.name"
                            >
                            {{ item.chara.name }}
                        </td>
                        <td>{{ item.name }}</td>
                        <td>{{ item.useTime | useTimeToString }}</td>
                        <td>
                            <input
                                class="btn btn-danger"
                                type="button"
                                value="删除"
                                @click="timeline.splice(index, 1)"
                            >
                        </td>
                    </tr>
                </template>
            </table>
            <br>
            <input
                class="btn btn-info"
                type="button"
                value="更改时间显示类型"
                @click="thIsTime = !thIsTime"
            >
            <input
                class="btn btn-danger"
                type="button"
                value="清空/重置"
                @click="clear()"
            >
            <br>
            <br>
    
            <table border="1px" v-show="result.length != 0">
                <tr>
                    <th style="min-width: 280px;">技能/时间</th>
                    <th style="min-width: 35px;" v-for="item in getTh()">{{ item }}</th>
                </tr>
                <template v-for="item in result">
                    <timeline-row :item="item" :key="item.timeline.toString()"></timeline-row>
                </template>
            </table>
            注：
            <br>
            蓝色方块为技能buff的持续时间；
            <br>
            ctrl+鼠标滚轮可以缩放视图大小。
        </div>

        <br>
        <br>
        
        <b>其他工具</b>
        <br>
        <a href="https://www.pcrdfans.com/tools/timeline" target="_blank">时间轴计算器(测试版)_公主连结Re:dive Fan Club</a>
        <br>
        <a href="https://wiki.biligame.com/pcr/角色图鉴" target="_blank">角色图鉴_公主连结WIKI_BWIKI</a>

        <br>
        <br>
        
        Version: 20.7.9.5
        <br>
        <br>
        更新日志：
        <br>
        v20.7.9.x
        <br>
        1.新增角色“伊莉亚”、“紡希”、“貪吃佩可（夏日）”
        <br>
        2.选择角色时，角色已经通过站位来进行分类了
        <br>
        <br>
        项目地址：
        <a href="https://github.com/PinkChampagne17/MahoNotes" target="_blank">
            <img alt="GitHub stars" src="https://img.shields.io/github/stars/PinkChampagne17/MahoNotes?style=social">
        </a>
        <br>
        数据整理：真步真步王国@一方通行
        <br>
        Powered by Vue.js & Bootstrap v4 on GitHub Pages
        <br>
    </div>
</body>

<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

<script src="components/selected-chara-skills-component.js"></script>
<script src="components/add-skill-time-component.js"></script>
<script src="components/timeline-row-component.js"></script>

<script src="js/charas.js"></script>

<script src="controllers/index-controller.js"></script>
